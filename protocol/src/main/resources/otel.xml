<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<sbe:messageSchema xmlns:sbe="http://fixprotocol.io/2016/sbe"
  xmlns:xi="http://www.w3.org/2001/XInclude" package="io.camunda.zeebe.protocol.otel"
  id="2" version="${protocol.version}" semanticVersion="${project.version}"
  description="OTEL Protocol" byteOrder="littleEndian">

  <xi:include href="common-types.xml"/>

  <types>
    <type name="TraceId" primitiveType="char" length="16" semanticType="Trace ID" />
    <type name="SpanId" primitiveType="uint64" semanticType="Span ID" />
    <type name="TraceFlags" primitiveType="int8" semanticType="Trace Flags" />

    <composite name="TraceStateKey">
      <type name="length" primitiveType="uint8" />
      <type name="varData" primitiveType="uint8" length="0" characterEncoding="ASCII"/>
    </composite>

    <composite name="TraceStateValue">
      <type name="length" primitiveType="uint8" />
      <type name="varData" primitiveType="uint8" length="0" characterEncoding="ASCII"/>
    </composite>
  </types>

  <sbe:message name="SpanContext" id="1" description="Propagated span context">
    <field name="TraceId" id="1" type="TraceId" presence="required" />
    <field name="SpanId" id="2" type="SpanId" presence="required" />
    <field name="TraceFlags" id="3" type="TraceFlags" presence="required" />
    <group name="TraceState" id="4" dimensionType="groupSizeEncoding" presence="optional">
      <data id="5" name="key" type="TraceStateKey" />
      <data id="6" name="value" type="TraceStateValue" />
    </group>
  </sbe:message>
</sbe:messageSchema>
